<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="view_order_form" model="ir.ui.view">
            <field name="name">sale.order.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <xpath expr="//button[@name='action_cancel']" position="before">
                    <button name="button_action_approve" type="object" string="Approve"
                            class="oe_highlight"
                            attrs="{'invisible': ['|', ('can_approve', '=', False), ('state', '!=', 'request')]}"/>
                </xpath>
                <xpath expr="//field[@name='state']" position="attributes">
                    <attribute name="statusbar_visible">request,draft,sent,sale</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="can_approve" invisible="1"/>
                </xpath>
            </field>
        </record>

        <record id="sale.action_orders" model="ir.actions.act_window">
            <field name="domain">[('state', 'not in', ('request', 'draft', 'sent', 'cancel'))]</field>
        </record>

        <record id="sale.action_orders_salesteams" model="ir.actions.act_window">
            <field name="domain">[('state','not in',('request', 'draft','sent','cancel'))]</field>
        </record>

        <record id="sale_order_view_search_inherit_quotation" model="ir.ui.view">
            <field name="name">sale.order.search.inherit.quotation</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.sale_order_view_search_inherit_quotation"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='draft']" position="attributes">
                    <attribute name="domain">[('state','in',('request', 'draft', 'sent'))]</attribute>
                </xpath>
            </field>
        </record>

<!--        <report-->
<!--                id="sale.action_report_saleorder"-->
<!--                string="Quotation / Order"-->
<!--                model="sale.order"-->
<!--                report_type="qweb-pdf"-->
<!--                file="sale.report_saleorder"-->
<!--                name="sale.report_saleorder"-->
<!--                groups="sales_team.group_sale_manager"-->
<!--                print_report_name="(object.state in ('draft', 'sent') and 'Quotation - %s' % (object.name)) or 'Order - %s' % (object.name)"-->
<!--        />-->

    </data>
</odoo>